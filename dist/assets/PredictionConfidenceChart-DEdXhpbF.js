import{al as N,r as w,j as e,C as o,a as m,b as x,g as i,c as h,z as v,x as u,aj as r,aG as C,a7 as k,ae as A,af as S,ag as y,a8 as b,a9 as D,B as F,h as j,w as L}from"./index-oF1ARjuv.js";import{u as P}from"./useQuery-CWzqJKQX.js";import{L as I,a as f}from"./LineChart-CcduGUPG.js";const T=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],$=N("info",T);function z({className:n}){const[c,g]=w.useState(7),{data:a,isLoading:p,error:d}=P({queryKey:["admin-model-analytics",c],queryFn:async()=>{const{data:s,error:t}=await L.functions.invoke("admin-model-analytics",{body:{window_days:c}});if(t)throw new Error(t.message);return s},refetchInterval:6e4}),l=s=>{g(s)};return d?e.jsxs(o,{className:n,children:[e.jsx(m,{children:e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(i,{className:"h-5 w-5"}),"Prediction Confidence & Accuracy"]})}),e.jsx(h,{children:e.jsxs("div",{className:"text-destructive",children:["Error loading analytics: ",d.message]})})]}):e.jsxs(o,{className:n,children:[e.jsx(m,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(i,{className:"h-5 w-5"}),"Prediction Confidence & Accuracy"]}),e.jsx(v,{children:"Track model confidence and accuracy trends over time"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{variant:c===7?"default":"outline",size:"sm",onClick:()=>l(7),children:"7 days"}),e.jsx(u,{variant:c===30?"default":"outline",size:"sm",onClick:()=>l(30),children:"30 days"})]})]})}),e.jsx(h,{children:p?e.jsxs("div",{className:"space-y-4",children:[e.jsx(r,{className:"h-4 w-1/4"}),e.jsx(r,{className:"h-64 w-full"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(r,{className:"h-16 w-full"}),e.jsx(r,{className:"h-16 w-full"}),e.jsx(r,{className:"h-16 w-full"}),e.jsx(r,{className:"h-16 w-full"})]})]}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Period"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(C,{className:"w-3 h-3"}),e.jsxs("p",{className:"text-sm font-medium",children:["Last ",c," days"]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Accuracy"}),e.jsxs("p",{className:"text-sm font-medium",children:[a.summary.accuracy.toFixed(1),"%"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Confidence"}),e.jsxs("p",{className:"text-sm font-medium",children:[(a.summary.avgConfidence*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Predictions"}),e.jsx("p",{className:"text-sm font-medium",children:a.summary.totalPredictions})]})]}),e.jsx("div",{className:"h-80",children:e.jsx(k,{width:"100%",height:"100%",children:e.jsxs(I,{data:a.timeSeriesData,children:[e.jsx(A,{strokeDasharray:"3 3"}),e.jsx(S,{dataKey:"date",tickFormatter:s=>new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(y,{yAxisId:"accuracy",domain:[0,100],tickFormatter:s=>`${s}%`}),e.jsx(y,{yAxisId:"confidence",orientation:"right",domain:[0,1],tickFormatter:s=>`${(s*100).toFixed(0)}%`}),e.jsx(b,{labelFormatter:s=>new Date(s).toLocaleDateString(),formatter:(s,t)=>t==="accuracy"?[`${s.toFixed(1)}%`,"Accuracy"]:t==="confidence"?[`${(s*100).toFixed(1)}%`,"Avg Confidence"]:[s,t]}),e.jsx(D,{}),e.jsx(f,{yAxisId:"accuracy",type:"monotone",dataKey:"accuracy",stroke:"#10b981",strokeWidth:2,dot:{fill:"#10b981",r:4},name:"Accuracy"}),e.jsx(f,{yAxisId:"confidence",type:"monotone",dataKey:"confidence",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",r:4},name:"Avg Confidence"})]})})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"System Status:"}),e.jsxs(F,{variant:a.systemStatus==="healthy"?"default":a.systemStatus==="warning"?"secondary":"destructive",className:"gap-1",children:[a.systemStatus==="healthy"&&e.jsx(i,{className:"w-3 h-3"}),a.systemStatus==="warning"&&e.jsx(j,{className:"w-3 h-3"}),a.systemStatus==="degraded"&&e.jsx(j,{className:"w-3 h-3"}),a.systemStatus.charAt(0).toUpperCase()+a.systemStatus.slice(1)]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[a.summary.correctPredictions," of ",a.summary.totalPredictions," predictions correct"]})]})]}):null})]})}export{$ as I,z as P};
