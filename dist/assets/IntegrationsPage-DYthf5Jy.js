import{al as c,r as N,by as I,j as e,A as m,n as p,C as u,a as h,b as y,z as b,c as x,B as _,f as l,x as E,bz as f,bA as v,bB as j,w as k}from"./index-oF1ARjuv.js";import{u as A}from"./useQuery-CWzqJKQX.js";import{A as O}from"./AdminLayout-Bg1DZssM.js";import{W as T}from"./workflow-DCkL6mGY.js";import{M as R}from"./message-square-wB-oYa13.js";import{D as S}from"./database-AuhrJFpe.js";import{F as w}from"./file-text-Bhwf5nmt.js";import"./sheet-DvMN5rIM.js";import"./index-ALgH8dPm.js";import"./cpu-Bs1Da7jx.js";const K=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],U=c("bug",K);const C=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],B=c("cloud",C);const L=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],M=c("code-xml",L);const q=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],D=c("git-branch",q);const P=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],V=c("globe",P),F={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVqZmZ4d2JrdXNteHJqdXZic293Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQxODY5OTAsImV4cCI6MjA3OTc2Mjk5MH0.2_VICRD4R6CFBV0FXDY8aTUpEzHuQdPwAu1Ls8oymFU",VITE_SUPABASE_PROJECT_ID:"ejffxwbkusmxrjuvbsow",VITE_SUPABASE_URL:"https://ejffxwbkusmxrjuvbsow.supabase.co"},Y=[{id:"github",name:"GitHub",description:"Repo links, webhooks, and CI triggers.",type:"backend",requiredKeys:["GITHUB_TOKEN","GITHUB_REPOSITORY"],icon:D,docsUrl:"https://docs.github.com/en/rest"},{id:"linear",name:"Linear",description:"Issue syncing and automation hooks.",type:"backend",requiredKeys:["LINEAR_API_KEY","LINEAR_TEAM_ID"],icon:T,docsUrl:"https://developers.linear.app/docs/graphql/overview"},{id:"slack",name:"Slack",description:"Alerting and release notifications.",type:"backend",requiredKeys:["SLACK_WEBHOOK_URL"],icon:R,docsUrl:"https://api.slack.com/messaging/webhooks"},{id:"cloudflare",name:"Cloudflare Observability",description:"Browser Insights beacon for RUM.",type:"observability",requiredKeys:[],frontendKeys:["VITE_CLOUDFLARE_BEACON_TOKEN"],icon:B,docsUrl:"https://developers.cloudflare.com/analytics/browser-insights/"},{id:"neon",name:"Neon Postgres",description:"Serverless Postgres for backend services.",type:"backend",requiredKeys:["NEON_DATABASE_URL"],icon:S,docsUrl:"https://neon.tech/docs"},{id:"notion",name:"Notion",description:"Knowledge base and content sync.",type:"backend",requiredKeys:["NOTION_API_KEY"],icon:w,docsUrl:"https://developers.notion.com/reference/intro"},{id:"prisma",name:"Prisma",description:"ORM for Node/Edge backends (server-only).",type:"backend",requiredKeys:["DATABASE_URL"],icon:M,docsUrl:"https://www.prisma.io/docs"},{id:"render",name:"Render",description:"Hosting for servers, CRON and workers.",type:"hosting",requiredKeys:["RENDER_DEPLOY_HOOK_URL"],icon:I,docsUrl:"https://render.com/docs/deploy-hooks"},{id:"sentry",name:"Sentry",description:"Front-end error tracking.",type:"observability",requiredKeys:[],frontendKeys:["VITE_SENTRY_DSN","VITE_SENTRY_ENV"],icon:U,docsUrl:"https://docs.sentry.io/platforms/javascript/"},{id:"webflow",name:"Webflow",description:"Marketing site CMS sync and forms.",type:"backend",requiredKeys:["WEBFLOW_API_TOKEN","WEBFLOW_SITE_ID"],icon:V,docsUrl:"https://developers.webflow.com/reference"}],H=async()=>{const{data:t,error:a}=await k.from("environment_variables_safe").select("id,key,value,is_secret,category,created_at,updated_at,created_by");if(a)throw new Error(a.message);return t??[]};function W(){return A({queryKey:["environment-variables-safe"],queryFn:H,staleTime:3e4})}function z({status:t}){const a={configured:{label:"Configured",class:"bg-emerald-500/15 text-emerald-500 border-emerald-500/30"},partial:{label:"Partial",class:"bg-amber-500/15 text-amber-500 border-amber-500/30"},missing:{label:"Not Configured",class:"bg-rose-500/15 text-rose-500 border-rose-500/30"}};return e.jsx("span",{className:l("rounded-full px-2.5 py-1 text-xs font-medium border",a[t].class),children:a[t].label})}function te(){const t=W(),a=N.useMemo(()=>{const s=t.data??[];return Y.map(n=>{if(n.id==="sentry"){const d=f();return{def:n,status:d?"configured":"missing"}}if(n.id==="cloudflare"){const d=j();return{def:n,status:d?"configured":"missing"}}const r=n.requiredKeys.length,i=n.requiredKeys.filter(d=>s.some(g=>g.key===d)).length,o=i===0?"missing":i<r?"partial":"configured";return{def:n,status:o}})},[t.data]);return e.jsxs(O,{title:"Integrations",description:"Configure and verify connections with your tools and platforms.",breadcrumbs:[{label:"Admin",href:"/admin"},{label:"Integrations"}],actions:null,children:[e.jsx(m,{className:"bg-muted/30 border-border/60",children:e.jsx(p,{children:"Secrets are stored server-side in the Environment Variables table. Avoid putting secrets in VITE_* variables."})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:a.map(({def:s,status:n})=>e.jsxs(u,{className:"border-border/60 bg-muted/20",children:[e.jsxs(h,{className:"flex flex-row items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s.icon,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsx(y,{className:"text-lg font-semibold",children:s.name}),e.jsx(b,{children:s.description})]})]}),e.jsx(z,{status:n})]}),e.jsxs(x,{className:"space-y-4",children:[s.requiredKeys.length>0?e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Required server keys"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.requiredKeys.map(r=>{const i=(t.data??[]).some(o=>o.key===r);return e.jsx(_,{variant:i?"default":"secondary",className:l(!i&&"opacity-70"),children:r},r)})})]}):null,s.frontendKeys&&s.frontendKeys.length>0?e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Frontend keys"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.frontendKeys.map(r=>{const o=!!F[r];return e.jsx(_,{variant:o?"default":"secondary",className:l(!o&&"opacity-70"),children:r},r)})})]}):null,e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.docsUrl?e.jsx(E,{asChild:!0,variant:"outline",size:"sm",children:e.jsx("a",{href:s.docsUrl,target:"_blank",rel:"noreferrer",children:"Docs"})}):null,s.id==="sentry"?e.jsx(E,{variant:"outline",size:"sm",onClick:()=>{try{throw new Error("Sentry test error")}catch(r){v(r,{test:!0})}},disabled:!f(),children:"Send test error"}):null]}),s.id==="prisma"||s.id==="neon"||s.id==="render"?e.jsx(m,{className:"bg-amber-500/10 border-amber-500/30 text-amber-600",children:e.jsx(p,{children:"This project runs a frontend SPA with Supabase Edge Functions. Prisma/Neon/Render are for backend services only. Store credentials in the Environment Variables table and use them in Edge Functions or external servers."})}):null]})]},s.id))}),e.jsxs(u,{className:"border-border/60 bg-muted/20",children:[e.jsxs(h,{children:[e.jsx(y,{className:"text-base",children:"Recommended environment variables"}),e.jsx(b,{children:"Add the following keys to the Environment Variables table for a complete setup."})]}),e.jsx(x,{className:"text-sm",children:e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"GITHUB_TOKEN, GITHUB_REPOSITORY"}),e.jsx("li",{children:"LINEAR_API_KEY, LINEAR_TEAM_ID"}),e.jsx("li",{children:"SLACK_WEBHOOK_URL"}),e.jsx("li",{children:"NOTION_API_KEY"}),e.jsx("li",{children:"WEBFLOW_API_TOKEN, WEBFLOW_SITE_ID"}),e.jsx("li",{children:"NEON_DATABASE_URL or DATABASE_URL (for Prisma)"}),e.jsx("li",{children:"RENDER_DEPLOY_HOOK_URL"}),e.jsx("li",{children:"VITE_SENTRY_DSN, VITE_SENTRY_ENV (frontend only)"}),e.jsx("li",{children:"VITE_CLOUDFLARE_BEACON_TOKEN (frontend only)"})]})})]})]})}export{te as default};
