import{al as ce,j as e,C as h,a as v,b as N,c as u,r as y,am as ue,an as R,w as p,R as L,l as _,f as W,B as E,x as g,bg as ge,aq as pe,h as je,bh as H,S as fe,J as O,ax as ye,ao as ve,G as Ne,I as be,ab as ee,A as $,n as B,g as we,L as I,aX as se,bi as K,at as te,au as ae,av as re,aw as ie,az as A,aJ as V,y as Ce,aA as Se,aB as ke,aC as ne,aD as F,aE as _e,aF as z}from"./index-oF1ARjuv.js";import{u as D}from"./useQuery-CWzqJKQX.js";import{u as Q}from"./useMutation-DOyzXJwO.js";import{S as De,P as Ae}from"./PerformanceMetricsChart-DNDcP8Lc.js";import{D as Pe,b as Re,c as Ee,d as Te,e as Me,f as qe}from"./dialog-ByqoZUx5.js";import{P as Le,I as Ie}from"./PredictionConfidenceChart-DEdXhpbF.js";import{D as oe}from"./database-AuhrJFpe.js";import{C as Fe}from"./cpu-Bs1Da7jx.js";import"./LineChart-CcduGUPG.js";import"./index-ALgH8dPm.js";const ze=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],He=ce("circle-play",ze);const Oe=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],de=ce("hard-drive",Oe);function Qe({nodes:t,children:a}){return e.jsxs("div",{style:{position:"relative",width:"100%",height:"100%",overflow:"hidden"},children:[t.map(n=>e.jsx("div",{style:{position:"absolute",left:n.position.x,top:n.position.y,padding:"8px 10px",borderRadius:8,fontSize:12,...n.style},children:n.data?.label??n.id},n.id)),a]})}function Ue(){return null}function $e(){return null}function Be({gap:t,size:a}){return null}const Ke={healthy:{background:"#064e3b",color:"#a7f3d0",border:"1px solid rgba(16,185,129,0.4)"},degraded:{background:"#513c06",color:"#fde68a",border:"1px solid rgba(234,179,8,0.4)"},down:{background:"#601b1d",color:"#fecaca",border:"1px solid rgba(239,68,68,0.4)"}};function Ve({graph:t}){const a=(t?.nodes??[]).map(r=>({id:r.id,data:{label:`${r.data.label}`},position:r.position,style:Ke[r.data.status]??{background:"#111827",color:"#e5e7eb",border:"1px solid rgba(255,255,255,0.08)"}})),n=(t?.edges??[]).map(r=>({id:r.id,source:r.source,target:r.target}));return e.jsxs(h,{className:"border-border/60 bg-muted/20",children:[e.jsx(v,{children:e.jsx(N,{className:"text-lg font-semibold",children:"Computation Map"})}),e.jsx(u,{style:{height:420},children:e.jsxs(Qe,{nodes:a,edges:n,fitView:!0,children:[e.jsx(Ue,{}),e.jsx($e,{}),e.jsx(Be,{gap:16,size:1})]})})]})}const G=({label:t,value:a,variant:n="default",trend:r})=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:t}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:W("text-2xl font-bold",n==="danger"&&"text-red-600",n==="warning"&&"text-orange-500"),children:a}),r==="down"&&e.jsx(je,{className:"h-4 w-4 text-red-500"})]})]}),Ge=()=>{const[t,a]=y.useState(!1),[n,r]=y.useState(""),j=ue(),{data:c,isLoading:T}=D({queryKey:["decay-event"],queryFn:async()=>{const{data:o,error:m}=await p.from("prediction_decay_events").select("*").eq("status","pending").order("triggered_at",{ascending:!1}).limit(1).maybeSingle();if(m)throw m;return o},refetchInterval:6e4}),w=Q({mutationFn:async o=>{const m=new Date().toISOString(),{error:x}=await p.from("prediction_decay_events").update({status:"auto_retrain_triggered",action_taken:`Auto retrain queued at ${m}`,resolved_at:m}).eq("id",o);if(x)throw x;return{success:!0}},onSuccess:()=>{j.invalidateQueries({queryKey:["decay-event"]}),R.success("Model retraining has been initiated",{description:"The system will automatically retrain the model with recent data."})},onError:o=>{R.error("Failed to trigger auto-retrain",{description:o instanceof Error?o.message:"Unknown error"})}}),S=Q({mutationFn:async({eventId:o,reason:m})=>{const{data:{user:x}}=await p.auth.getUser();if(!x)throw new Error("User not authenticated");const{error:q}=await p.from("prediction_decay_events").update({status:"overridden",override_reason:m,overridden_by:x.id,resolved_at:new Date().toISOString()}).eq("id",o);if(q)throw q},onSuccess:()=>{j.invalidateQueries({queryKey:["decay-event"]}),a(!1),r(""),R.success("Decay alert has been overridden",{description:"The alert has been marked as resolved."})},onError:o=>{R.error("Failed to override alert",{description:o instanceof Error?o.message:"Unknown error"})}}),M=()=>{c&&w.mutate(c.id)},P=()=>{c&&n.trim()?S.mutate({eventId:c.id,reason:n.trim()}):R.error("Please provide a reason for overriding the alert")};if(T)return e.jsx(h,{children:e.jsx(u,{className:"pt-6",children:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(L,{className:"h-6 w-6 animate-spin text-muted-foreground"})})})});if(!c)return e.jsxs(h,{children:[e.jsx(v,{children:e.jsxs(N,{className:"flex items-center gap-2 text-green-600",children:[e.jsx(_,{className:"h-5 w-5"}),"Model Performance Status"]})}),e.jsx(u,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx("div",{className:"rounded-full bg-green-100 p-3 mb-4",children:e.jsx(_,{className:"h-6 w-6 text-green-600"})}),e.jsx("p",{className:"text-lg font-medium text-green-600 mb-2",children:"No Decay Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"Model prediction accuracy is stable. No significant performance degradation detected."})]})})]});const k={severe:{color:"border-l-red-600",badgeVariant:"destructive",bgColor:"bg-red-50"},critical:{color:"border-l-orange-500",badgeVariant:"default",bgColor:"bg-orange-50"},warning:{color:"border-l-yellow-500",badgeVariant:"secondary",bgColor:"bg-yellow-50"}}[c.severity];return e.jsxs(e.Fragment,{children:[e.jsxs(h,{className:W("border-l-4",k.color),children:[e.jsx(v,{className:k.bgColor,children:e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-red-600"}),"Prediction Decay Detected",e.jsx(E,{variant:k.badgeVariant,children:c.severity.toUpperCase()})]})}),e.jsx(u,{className:"pt-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(G,{label:"7-Day Average",value:`${c.seven_day_avg_accuracy.toFixed(1)}%`}),e.jsx(G,{label:"3-Day Recent",value:`${c.three_day_accuracy.toFixed(1)}%`,trend:"down",variant:"warning"}),e.jsx(G,{label:"Performance Drop",value:`${c.drop_percentage.toFixed(1)}%`,variant:"danger"})]}),e.jsxs("div",{className:"rounded-lg bg-muted p-4 space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Alert Details"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Period: ",new Date(c.window_start).toLocaleDateString()," ","- ",new Date(c.window_end).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Triggered:"," ",new Date(c.triggered_at).toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{onClick:M,disabled:w.isPending,className:"flex-1",children:[w.isPending?e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(L,{className:"mr-2 h-4 w-4"}),"Auto Retrain"]}),e.jsxs(g,{onClick:()=>a(!0),variant:"outline",className:"flex-1",disabled:S.isPending,children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"Override Alert"]})]})]})})]}),e.jsx(Pe,{open:t,onOpenChange:a,children:e.jsxs(Re,{children:[e.jsxs(Ee,{children:[e.jsx(Te,{children:"Override Decay Alert"}),e.jsx(Me,{children:"Provide a reason for dismissing this accuracy drop without retraining. This will mark the alert as resolved."})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsx(pe,{placeholder:"e.g., Seasonal anomaly, data quality issue, expected variance due to league break...",value:n,onChange:o=>r(o.target.value),rows:4,className:"resize-none"})}),e.jsxs(qe,{children:[e.jsx(g,{variant:"outline",onClick:()=>{a(!1),r("")},disabled:S.isPending,children:"Cancel"}),e.jsxs(g,{onClick:P,disabled:!n.trim()||S.isPending,children:[S.isPending&&e.jsx(L,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirm Override"]})]})]})})]})},We=()=>D({queryKey:["monitoring","health"],queryFn:async()=>{const{data:t,error:a}=await p.functions.invoke("monitoring-health");if(a)throw new Error(a.message);return t},refetchInterval:3e4}),Xe=()=>D({queryKey:["monitoring","graph"],queryFn:async()=>{const{data:t,error:a}=await p.functions.invoke("monitoring-computation-graph");if(a)throw new Error(a.message);return t},refetchInterval:6e4}),Je=()=>D({queryKey:["monitoring","alerts"],queryFn:async()=>{const{data:t,error:a}=await p.functions.invoke("monitoring-alerts");if(a)throw new Error(a.message);return t},refetchInterval:15e3}),Ye=t=>D({queryKey:["monitoring","metrics",t??"all"],queryFn:async()=>{const{data:a,error:n}=await p.functions.invoke("monitoring-metrics",{body:t?{component:t}:{}});if(n)throw new Error(n.message);return a},enabled:!0,refetchInterval:3e4}),Ze=()=>D({queryKey:["retraining","latest"],queryFn:async()=>{const{data:t,error:a}=await p.from("model_retraining_runs").select("*").order("started_at",{ascending:!1}).limit(1).single();if(a&&a.code!=="PGRST116")throw new Error(a.message);return t},refetchInterval:3e4}),es=()=>D({queryKey:["retrain-suggestion","latest"],queryFn:async()=>{const{data:t,error:a}=await p.from("retrain_suggestion_log").select("*").eq("status","pending").order("suggested_at",{ascending:!1}).limit(1).single();if(a&&a.code!=="PGRST116")throw new Error(a.message);return t},refetchInterval:3e4}),le=[{id:"1",title:"Database Status",description:"PostgreSQL database performance and connections",url:"/admin/database",icon:oe,category:"system"},{id:"2",title:"API Documentation",description:"REST API and Edge Functions documentation",url:"/docs/api",icon:H,category:"system"},{id:"3",title:"Security Audit",description:"Security configuration and audit logs",url:"/admin/security",icon:fe,category:"security"},{id:"4",title:"Performance Logs",description:"Detailed performance and error logs",url:"/admin/logs",icon:O,category:"monitoring"},{id:"5",title:"Backup Management",description:"Database backups and restoration",url:"/admin/backups",icon:de,category:"data"},{id:"6",title:"Rate Limiting",description:"API rate limits and usage statistics",url:"/admin/rate-limits",icon:ye,category:"security"}];function ms(){const t=We(),a=Xe(),n=Je(),r=Ze(),j=es(),[c,T]=y.useState(null),[w,S]=y.useState("all"),[M,P]=y.useState(!1),[U,k]=y.useState(""),o=Ye(c);y.useEffect(()=>{!c&&t.data?.components?.length&&T(t.data.components[0].component_name)},[t.data?.components,c]);const m=Q({mutationFn:async()=>{const{data:{user:s},error:l}=await p.auth.getUser();if(l||!s)throw new Error("Not authenticated");const{error:d}=await p.from("model_retraining_requests").insert({requested_by:s.id,reason:U||"Manual trigger from monitoring page",priority:"high",status:"pending"});if(d)throw d},onSuccess:()=>{P(!1),k(""),r.refetch()}}),x=Q({mutationFn:async({suggestionId:s,action:l,notes:d})=>{const{data:i,error:f}=await p.functions.invoke("retrain-suggestion-action",{body:{suggestionId:s,action:l,notes:d}});if(f)throw new Error(f.message);return i},onSuccess:()=>{j.refetch(),r.refetch()}}),q=y.useMemo(()=>{const s=o.data?.metrics??[],l=new Map;for(const d of s){const i=d.timestamp;l.has(i)||l.set(i,{time:i});const f=l.get(i);d.metric_name==="latency_p50"&&(f.p50=d.value),d.metric_name==="latency_p95"&&(f.p95=d.value),d.metric_name==="latency_p99"&&(f.p99=d.value)}return Array.from(l.values()).sort((d,i)=>new Date(d.time).getTime()-new Date(i.time).getTime())},[o.data]),C=y.useMemo(()=>{const s=t.data?.components??[],l=n.data?.alerts??[],d=s.filter(b=>b.status==="healthy").length,i=s.filter(b=>b.status==="warning").length,f=s.filter(b=>b.status==="error").length,Y=l.filter(b=>b.severity==="critical").length,Z=l.filter(b=>b.severity==="warning").length;return{totalComponents:s.length,healthyComponents:d,warningComponents:i,errorComponents:f,totalAlerts:l.length,criticalAlerts:Y,warningAlerts:Z,overallHealth:f>0||Y>0?"error":i>0||Z>0?"warning":"healthy"}},[t.data?.components,n.data?.alerts]),X=y.useMemo(()=>{const s=[],l=t.data?.components??[],d=n.data?.alerts??[];return l.forEach(i=>{i.status==="error"?s.push({id:`component-error-${i.id}`,type:"error",title:`${i.component_name} Error`,description:i.error_message||"Component is experiencing errors",link:"/admin/components",linkText:"View Details",timestamp:i.last_check}):i.status==="warning"&&s.push({id:`component-warning-${i.id}`,type:"warning",title:`${i.component_name} Warning`,description:i.error_message||"Component performance degraded",link:"/admin/components",linkText:"View Details",timestamp:i.last_check})}),d.forEach(i=>{s.push({id:`alert-${i.id}`,type:i.severity==="critical"?"error":i.severity,title:i.message,description:i.component?`Component: ${i.component}`:void 0,link:"/admin/alerts",linkText:"View Alert",timestamp:i.timestamp})}),s.sort((i,f)=>new Date(f.timestamp).getTime()-new Date(i.timestamp).getTime())},[t.data?.components,n.data?.alerts]),me=y.useMemo(()=>w==="all"?le:le.filter(s=>s.category===w),[w]),J=t.isLoading||a.isLoading,xe=s=>{switch(s){case"healthy":return e.jsx(se,{className:"w-5 h-5 text-green-500"});case"warning":return e.jsx(_,{className:"w-5 h-5 text-yellow-500"});case"error":return e.jsx(K,{className:"w-5 h-5 text-red-500"});default:return e.jsx(O,{className:"w-5 h-5 text-gray-500"})}},he=s=>{switch(s){case"critical":return e.jsx(K,{className:"w-4 h-4 text-red-500"});case"warning":return e.jsx(_,{className:"w-4 h-4 text-yellow-500"});case"info":return e.jsx(Ie,{className:"w-4 h-4 text-blue-500"});default:return e.jsx(O,{className:"w-4 h-4 text-gray-500"})}};return e.jsx(ve,{allowedRoles:["admin","analyst"],children:e.jsxs("div",{className:"min-h-screen bg-black",children:[e.jsx(Ne,{}),e.jsx(be,{}),e.jsx("main",{className:"lg:ml-64 pt-16 lg:pt-0",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gradient-emerald",children:"System Monitoring"}),e.jsx("p",{className:"text-muted-foreground",children:"Real-time system health, performance metrics, and alerts"})]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>{t.refetch(),a.refetch(),n.refetch(),o.refetch()},disabled:J,className:"inline-flex items-center gap-2",children:[e.jsx(ee,{className:W("w-4 h-4",J?"animate-spin":"")}),"Refresh All"]})]}),e.jsxs(h,{className:"bg-card/60 border-border/80 backdrop-blur mb-8",children:[e.jsx(v,{children:e.jsxs(N,{className:"flex items-center gap-2",children:[xe(C.overallHealth),"System Health Overview",e.jsx(E,{variant:C.overallHealth==="healthy"?"default":C.overallHealth==="warning"?"secondary":"destructive",children:C.overallHealth.toUpperCase()})]})}),e.jsx(u,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-500",children:C.healthyComponents}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Healthy Components"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-500",children:C.warningComponents}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Warnings"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-500",children:C.errorComponents}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Errors"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:C.totalAlerts}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Alerts"})]})]})})]}),e.jsx("div",{className:"mb-8",children:e.jsx(Ge,{})}),X.length>0&&e.jsxs("div",{className:"space-y-4 mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Active Warnings & Alerts"}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:X.slice(0,6).map(s=>e.jsx($,{variant:s.type==="error"?"destructive":"default",children:e.jsxs("div",{className:"flex items-start gap-3",children:[he(s.type),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.title}),s.description&&e.jsx(B,{className:"mt-1",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(s.timestamp).toLocaleString()}),s.link&&e.jsx(g,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:s.link,className:"flex items-center gap-1",children:[e.jsx(H,{className:"w-3 h-3"}),s.linkText]})})]})]})]})},s.id))})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:(t.data?.components??[]).map(s=>e.jsx(De,{health:s},s.id))}),e.jsxs(h,{className:"border-border/60 bg-muted/20 mb-8",children:[e.jsxs(v,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(N,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5"}),"Model Auto Reinforcement"]}),j.data&&e.jsxs(E,{variant:"destructive",className:"gap-1",children:[e.jsx(_,{className:"w-3 h-3"}),"Retrain javasolt"]})]}),e.jsxs(g,{onClick:()=>P(!M),variant:"default",size:"sm",disabled:m.isPending,className:"gap-2",children:[e.jsx(He,{className:"w-4 h-4"}),m.isPending?"Processing...":"Retrain Now"]})]}),e.jsxs(u,{className:"space-y-4",children:[M&&e.jsx($,{children:e.jsxs(B,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Reason for Retraining (optional)"}),e.jsx("textarea",{className:"w-full px-3 py-2 text-sm border rounded-md bg-background",placeholder:"Why are you triggering retraining?",value:U,onChange:s=>k(s.target.value),rows:3})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{onClick:()=>m.mutate(),disabled:m.isPending,size:"sm",children:[m.isPending&&e.jsx(I,{className:"w-4 h-4 mr-2 animate-spin"}),"Confirm Retraining"]}),e.jsx(g,{onClick:()=>{P(!1),k("")},variant:"outline",size:"sm",children:"Cancel"})]}),m.isError&&e.jsxs("div",{className:"text-sm text-destructive",children:["Error: ",m.error instanceof Error?m.error.message:"Unknown error"]}),m.isSuccess&&e.jsx("div",{className:"text-sm text-green-600",children:"✓ Retraining request queued successfully"})]})}),j.data&&e.jsxs($,{children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx(AlertTitle,{children:"Retrain Suggestion"}),e.jsxs(B,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm",children:["Model accuracy has dropped to ",e.jsxs("strong",{children:[j.data.accuracy,"%"]})," in the last ",j.data.window_days," days, which is below the 70% threshold."]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Suggested: ",new Date(j.data.suggested_at).toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{onClick:()=>x.mutate({suggestionId:j.data.id,action:"accept",notes:`Accepted suggestion: Accuracy ${j.data.accuracy}% below 70% threshold`}),disabled:x.isPending,size:"sm",variant:"default",children:[x.isPending&&e.jsx(I,{className:"w-4 h-4 mr-2 animate-spin"}),"Elfogadom"]}),e.jsx(g,{onClick:()=>x.mutate({suggestionId:j.data.id,action:"dismiss",notes:"Dismissed by admin"}),disabled:x.isPending,size:"sm",variant:"outline",children:"Elutasítom"})]}),x.isError&&e.jsxs("div",{className:"text-sm text-destructive",children:["Error: ",x.error instanceof Error?x.error.message:"Unknown error"]}),x.isSuccess&&e.jsx("div",{className:"text-sm text-green-600",children:"✓ Suggestion processed successfully"})]})]}),r.data?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Status"}),e.jsxs(E,{variant:r.data.status==="completed"?"default":r.data.status==="failed"?"destructive":r.data.status==="running"?"secondary":"outline",className:"gap-1 w-fit",children:[r.data.status==="running"&&e.jsx(I,{className:"w-3 h-3 animate-spin"}),r.data.status==="completed"&&e.jsx(se,{className:"w-3 h-3"}),r.data.status==="failed"&&e.jsx(K,{className:"w-3 h-3"}),r.data.status]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Source"}),e.jsx("p",{className:"text-sm font-medium",children:r.data.source})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Dataset Size"}),e.jsxs("p",{className:"text-sm font-medium",children:[r.data.dataset_size," samples"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Started"}),e.jsx("p",{className:"text-sm font-medium",children:new Date(r.data.started_at).toLocaleDateString()})]})]}),r.data.metrics&&Object.keys(r.data.metrics).length>0&&e.jsxs("div",{className:"border-t pt-3",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Training Metrics"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:Object.entries(r.data.metrics).map(([s,l])=>e.jsxs("div",{className:"bg-card/60 p-2 rounded-md",children:[e.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:s.replace(/_/g," ")}),e.jsx("p",{className:"text-sm font-semibold",children:typeof l=="number"?l.toFixed(4):l})]},s))})]}),r.data.completed_at&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Completed: ",new Date(r.data.completed_at).toLocaleString()]})]}):r.isLoading?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(I,{className:"w-5 h-5 animate-spin text-muted-foreground"})}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No retraining runs yet"})]})]}),e.jsxs(h,{className:"border-border/60 bg-muted/20 mb-8",children:[e.jsxs(v,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs(N,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"}),"Performance Metrics"]}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-64",children:[e.jsxs(te,{value:c??void 0,onValueChange:s=>T(s),children:[e.jsx(ae,{children:e.jsx(re,{placeholder:"Select component"})}),e.jsx(ie,{children:(t.data?.components??[]).map(s=>e.jsx(A,{value:s.component_name,children:s.component_name},s.id))})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>void o.refetch(),children:e.jsx(ee,{className:"w-4 h-4"})})]})]}),e.jsx(u,{children:e.jsx(Ae,{data:q})})]}),e.jsx(Le,{className:"mb-8"}),e.jsxs(h,{className:"border-border/60 bg-muted/20 mb-8",children:[e.jsxs(v,{children:[e.jsxs(N,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5"}),"Quick Links"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(te,{value:w,onValueChange:S,children:[e.jsx(ae,{className:"w-48",children:e.jsx(re,{placeholder:"Filter by category"})}),e.jsxs(ie,{children:[e.jsx(A,{value:"all",children:"All Categories"}),e.jsx(A,{value:"system",children:"System"}),e.jsx(A,{value:"data",children:"Data"}),e.jsx(A,{value:"security",children:"Security"}),e.jsx(A,{value:"monitoring",children:"Monitoring"})]})]})})]}),e.jsx(u,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:me.map(s=>{const l=s.icon;return e.jsx(h,{className:"bg-card/60 border-border/80 backdrop-blur hover:border-primary/30 transition-colors",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(l,{className:"w-5 h-5 text-muted-foreground mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-foreground mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s.description}),e.jsx(g,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:s.url,className:"flex items-center gap-1",children:[e.jsx(H,{className:"w-3 h-3"}),"Open"]})})]})]})})},s.id)})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs(h,{className:"bg-card/60 border-border/80 backdrop-blur",children:[e.jsx(v,{children:e.jsxs(N,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5"}),"CPU Usage"]})}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Current"}),e.jsx("span",{className:"text-sm font-medium",children:"45%"})]}),e.jsx(V,{value:45,className:"h-2"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Average: 42% over last hour"})]})})]}),e.jsxs(h,{className:"bg-card/60 border-border/80 backdrop-blur",children:[e.jsx(v,{children:e.jsxs(N,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(de,{className:"w-5 h-5"}),"Memory Usage"]})}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Current"}),e.jsx("span",{className:"text-sm font-medium",children:"68%"})]}),e.jsx(V,{value:68,className:"h-2"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"5.4 GB / 8 GB used"})]})})]}),e.jsxs(h,{className:"bg-card/60 border-border/80 backdrop-blur",children:[e.jsx(v,{children:e.jsxs(N,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5"}),"Database"]})}),e.jsx(u,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Connections"}),e.jsx("span",{className:"text-sm font-medium",children:"12/50"})]}),e.jsx(V,{value:24,className:"h-2"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Query time: 23ms avg"})]})})]})]}),e.jsx(Ve,{graph:a.data??null}),e.jsxs(h,{className:"border-border/60 bg-muted/20",children:[e.jsx(v,{children:e.jsxs(N,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"}),"Recent Activity"]})}),e.jsx(u,{children:(n.data?.alerts??[]).length===0?e.jsx("div",{className:"text-muted-foreground",children:"No recent alerts."}):e.jsxs(Se,{children:[e.jsx(ke,{children:e.jsxs(ne,{children:[e.jsx(F,{children:"Time"}),e.jsx(F,{children:"Severity"}),e.jsx(F,{children:"Message"}),e.jsx(F,{children:"Component"})]})}),e.jsx(_e,{children:(n.data?.alerts??[]).slice(0,10).map(s=>e.jsxs(ne,{children:[e.jsx(z,{className:"font-mono text-sm",children:new Date(s.timestamp).toLocaleTimeString()}),e.jsx(z,{children:e.jsx(E,{variant:s.severity==="critical"?"destructive":s.severity==="warning"?"secondary":"outline",children:s.severity})}),e.jsx(z,{children:s.message}),e.jsx(z,{children:s.component||"-"})]},s.id))})]})})]})]})})]})})}export{ms as default};
