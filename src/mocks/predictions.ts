import type {
  MatchStatus,
  PredictionActual,
  PredictionForecast,
  PredictionRecord,
  PredictionStatus,
} from "@/types/predictions";

const leagues = {
  premier: { id: "premier-league", name: "Premier League", country: "England" },
  laLiga: { id: "la-liga", name: "La Liga", country: "Spain" },
  serieA: { id: "serie-a", name: "Serie A", country: "Italy" },
  bundesliga: { id: "bundesliga", name: "Bundesliga", country: "Germany" },
  ligue1: { id: "ligue-1", name: "Ligue 1", country: "France" },
} as const;

const models = {
  atlasPrime: { id: "atlas-prime", name: "Atlas Prime", version: "3.2.0", isShadowMode: false },
  orionEdge: { id: "orion-edge", name: "Orion Edge", version: "2.4.1", isShadowMode: false },
  heliosShadow: { id: "helios-shadow", name: "Helios Shadow", version: "1.9.5", isShadowMode: true },
  novaExperimental: { id: "nova-experimental", name: "Nova Experimental", version: "0.9.3", isShadowMode: true },
} as const;

type LeagueKey = keyof typeof leagues;
type ModelKey = keyof typeof models;

interface CreatePredictionArgs {
  id: string;
  createdAt: string;
  status: PredictionStatus;
  match: {
    id: string;
    date: string;
    status: MatchStatus;
    league: LeagueKey;
    homeTeam: string;
    awayTeam: string;
  };
  model: ModelKey;
  forecast: PredictionForecast;
  actual?: PredictionActual;
  calibrationError?: number | null;
}

const ensureForecast = (forecast: PredictionForecast): PredictionForecast => ({
  outcome: forecast.outcome,
  confidence: forecast.confidence,
  homeScore: forecast.homeScore ?? null,
  awayScore: forecast.awayScore ?? null,
  bothTeamsToScore: forecast.bothTeamsToScore ?? null,
  overUnder: forecast.overUnder ?? null,
  css: forecast.css ?? null,
  factors: forecast.factors ?? [],
});

const ensureActual = (actual?: PredictionActual): PredictionActual => ({
  outcome: actual?.outcome ?? null,
  wasCorrect: actual?.wasCorrect ?? null,
  homeScore: actual?.homeScore ?? null,
  awayScore: actual?.awayScore ?? null,
  evaluatedAt: actual?.evaluatedAt ?? null,
});

const createPrediction = ({
  id,
  createdAt,
  status,
  match,
  model,
  forecast,
  actual,
  calibrationError,
}: CreatePredictionArgs): PredictionRecord => ({
  id,
  createdAt,
  status,
  match: {
    id: match.id,
    date: match.date,
    status: match.status,
    league: { ...leagues[match.league] },
    homeTeam: match.homeTeam,
    awayTeam: match.awayTeam,
  },
  model: { ...models[model] },
  forecast: ensureForecast(forecast),
  actual: ensureActual(actual),
  metrics: {
    calibrationError: calibrationError ?? null,
  },
});

export const mockPredictions: PredictionRecord[] = [
  createPrediction({
    id: "pred-001",
    createdAt: "2024-11-15T09:00:00Z",
    status: "won",
    match: {
      id: "match-ars-che-20241116",
      date: "2024-11-16T15:00:00Z",
      status: "completed",
      league: "premier",
      homeTeam: "Arsenal",
      awayTeam: "Chelsea",
    },
    model: "atlasPrime",
    forecast: {
      outcome: "home",
      confidence: 84,
      homeScore: 2,
      awayScore: 1,
      bothTeamsToScore: false,
      overUnder: "under_3.5",
      css: 0.72,
      factors: ["Home unbeaten streak", "Chelsea key injuries"],
    },
    actual: {
      outcome: "home",
      wasCorrect: true,
      homeScore: 2,
      awayScore: 0,
      evaluatedAt: "2024-11-16T17:02:00Z",
    },
    calibrationError: 1.8,
  }),
  createPrediction({
    id: "pred-002",
    createdAt: "2024-11-17T08:30:00Z",
    status: "won",
    match: {
      id: "match-mci-tot-20241118",
      date: "2024-11-18T19:30:00Z",
      status: "completed",
      league: "premier",
      homeTeam: "Manchester City",
      awayTeam: "Tottenham",
    },
    model: "orionEdge",
    forecast: {
      outcome: "home",
      confidence: 88,
      homeScore: 3,
      awayScore: 1,
      bothTeamsToScore: true,
      overUnder: "over_2.5",
      css: 0.81,
      factors: ["City attacking form", "Tottenham defensive gaps"],
    },
    actual: {
      outcome: "home",
      wasCorrect: true,
      homeScore: 3,
      awayScore: 1,
      evaluatedAt: "2024-11-18T21:45:00Z",
    },
    calibrationError: 1.2,
  }),
  createPrediction({
    id: "pred-003",
    createdAt: "2024-11-18T10:15:00Z",
    status: "lost",
    match: {
      id: "match-mun-liv-20241119",
      date: "2024-11-19T20:00:00Z",
      status: "completed",
      league: "premier",
      homeTeam: "Manchester United",
      awayTeam: "Liverpool",
    },
    model: "heliosShadow",
    forecast: {
      outcome: "home",
      confidence: 63,
      homeScore: 2,
      awayScore: 1,
      bothTeamsToScore: true,
      overUnder: "over_2.5",
      css: 0.57,
      factors: ["Old Trafford advantage", "Liverpool rotation"],
    },
    actual: {
      outcome: "away",
      wasCorrect: false,
      homeScore: 1,
      awayScore: 3,
      evaluatedAt: "2024-11-19T22:05:00Z",
    },
    calibrationError: 4.4,
  }),
  createPrediction({
    id: "pred-004",
    createdAt: "2024-11-20T09:05:00Z",
    status: "in_progress",
    match: {
      id: "match-ava-whu-20241121",
      date: "2024-11-21T19:45:00Z",
      status: "live",
      league: "premier",
      homeTeam: "Aston Villa",
      awayTeam: "West Ham",
    },
    model: "novaExperimental",
    forecast: {
      outcome: "home",
      confidence: 67,
      homeScore: 2,
      awayScore: 1,
      bothTeamsToScore: true,
      overUnder: "over_2.5",
      css: 0.6,
      factors: ["Villa high press", "West Ham away fatigue"],
    },
    actual: {
      outcome: null,
      wasCorrect: null,
      homeScore: null,
      awayScore: null,
      evaluatedAt: null,
    },
    calibrationError: 2.9,
  }),
  createPrediction({
    id: "pred-005",
    createdAt: "2024-11-21T07:40:00Z",
    status: "upcoming",
    match: {
      id: "match-new-bha-20241123",
      date: "2024-11-23T20:00:00Z",
      status: "scheduled",
      league: "premier",
      homeTeam: "Newcastle",
      awayTeam: "Brighton",
    },
    model: "atlasPrime",
    forecast: {
      outcome: "draw",
      confidence: 58,
      homeScore: 1,
      awayScore: 1,
      bothTeamsToScore: true,
      overUnder: "under_3.5",
      css: 0.49,
      factors: ["Balanced xG", "Brighton travel"],
    },
    actual: undefined,
    calibrationError: 1.6,
  }),
  createPrediction({
    id: "pred-006",
    createdAt: "2024-11-11T08:00:00Z",
    status: "won",
    match: {
      id: "match-rma-sev-20241112",
      date: "2024-11-12T20:00:00Z",
      status: "completed",
      league: "laLiga",
      homeTeam: "Real Madrid",
      awayTeam: "Sevilla",
    },
    model: "atlasPrime",
    forecast: {
      outcome: "home",
      confidence: 82,
      homeScore: 2,
      awayScore: 0,
      bothTeamsToScore: false,
      overUnder: "under_2.5",
      css: 0.74,
      factors: ["Real possession control", "Sevilla away slump"],
    },
    actual: {
      outcome: "home",
      wasCorrect: true,
      homeScore: 2,
      awayScore: 0,
      evaluatedAt: "2024-11-12T22:10:00Z",
    },
    calibrationError: 2.3,
  }),
  createPrediction({
    id: "pred-007",
    createdAt: "2024-11-13T09:12:00Z",
    status: "lost",
    match: {
      id: "match-bar-atm-20241114",
      date: "2024-11-14T21:00:00Z",
      status: "completed",
      league: "laLiga",
      homeTeam: "Barcelona",
      awayTeam: "Atlético Madrid",
    },
    model: "heliosShadow",
    forecast: {
      outcome: "home",
      confidence: 69,
      homeScore: 2,
      awayScore: 1,
      bothTeamsToScore: true,
      overUnder: "over_2.5",
      css: 0.61,
      factors: ["Barça attacking width", "Atlético fixture congestion"],
    },
    actual: {
      outcome: "away",
      wasCorrect: false,
      homeScore: 1,
      awayScore: 2,
      evaluatedAt: "2024-11-14T23:20:00Z",
    },
    calibrationError: 3.7,
  }),
  createPrediction({
    id: "pred-008",
    createdAt: "2024-11-15T07:55:00Z",
    status: "void",
    match: {
      id: "match-val-vil-20241117",
      date: "2024-11-17T18:00:00Z",
      status: "scheduled",
      league: "laLiga",
      homeTeam: "Valencia",
      awayTeam: "Villarreal",
    },
    model: "orionEdge",
    forecast: {
      outcome: "home",
      confidence: 64,
      homeScore: 1,
      awayScore: 0,
      bothTeamsToScore: false,
      overUnder: "under_2.5",
      css: 0.52,
      factors: ["Valencia pressing edge", "Villarreal away fatigue"],
    },
    actual: {
      outcome: "void",
      wasCorrect: null,
      homeScore: null,
      awayScore: null,
      evaluatedAt: "2024-11-17T16:00:00Z",
    },
    calibrationError: null,
  }),
  createPrediction({
    id: "pred-009",
    createdAt: "2024-11-19T08:40:00Z",
    status: "in_progress",
    match: {
      id: "match-rso-bet-20241120",
      date: "2024-11-20T21:00:00Z",
      status: "live",
      league: "laLiga",
      homeTeam: "Real Sociedad",
      awayTeam: "Real Betis",
    },
    model: "novaExperimental",
    forecast: {
      outcome: "home",
      confidence: 66,
      homeScore: 2,
      awayScore: 1,
      bothTeamsToScore: true,
      overUnder: "over_2.5",
      css: 0.59,
      factors: ["Sociedad midfield control", "Betis defensive rotation"],
    },
    actual: undefined,
    calibrationError: 2.1,
  }),
  createPrediction({
    id: "pred-010",
    createdAt: "2024-11-21T09:05:00Z",
    status: "upcoming",
    match: {
      id: "match-gir-mal-20241124",
      date: "2024-11-24T17:30:00Z",
      status: "scheduled",
      league: "laLiga",
      homeTeam: "Girona",
      awayTeam: "Mallorca",
    },
    model: "atlasPrime",
    forecast: {
      outcome: "home",
      confidence: 71,
      homeScore: 2,
      awayScore: 0,
      bothTeamsToScore: false,
      overUnder: "under_2.5",
      css: 0.65,
      factors: ["Girona vertical play", "Mallorca travel fatigue"],
    },
    actual: undefined,
    calibrationError: 1.5,
  }),
  createPrediction({
    id: "pred-011",
    createdAt: "2024-11-09T07:20:00Z",
    status: "won",
    match: {
      id: "match-juv-mil-20241110",
      date: "2024-11-10T19:45:00Z",
      status: "completed",
      league: "serieA",
      homeTeam: "Juventus",
      awayTeam: "AC Milan",
    },
    model: "orionEdge",
    forecast: {
      outcome: "home",
      confidence: 76,
      homeScore: 2,
      awayScore: 1,
      bothTeamsToScore: true,
      overUnder: "under_3.5",
      css: 0.69,
      factors: ["Juventus defensive solidity", "Milan rotation"],
    },
    actual: {
      outcome: "home",
      wasCorrect: true,
      homeScore: 2,
      awayScore: 1,
      evaluatedAt: "2024-11-10T21:55:00Z",
    },
    calibrationError: 2.0,
  }),
  createPrediction({
    id: "pred-012",
    createdAt: "2024-11-12T08:00:00Z",
    status: "lost",
    match: {
      id: "match-int-nap-20241113",
      date: "2024-11-13T19:45:00Z",
      status: "completed",
      league: "serieA",
      homeTeam: "Inter",
      awayTeam: "Napoli",
    },
    model: "heliosShadow",
    forecast: {
      outcome: "home",
      confidence: 62,
      homeScore: 1,
      awayScore: 0,
      bothTeamsToScore: false,
      overUnder: "under_2.5",
      css: 0.48,
      factors: ["Inter compact shape", "Napoli away dip"],
    },
    actual: {
      outcome: "away",
      wasCorrect: false,
      homeScore: 0,
      awayScore: 2,
      evaluatedAt: "2024-11-13T22:05:00Z",
    },
    calibrationError: 3.9,
  }),
  createPrediction({
    id: "pred-013",
    createdAt: "2024-11-17T09:30:00Z",
    status: "in_progress",
    match: {
      id: "match-rom-laz-20241118",
      date: "2024-11-18T20:45:00Z",
      status: "live",
      league: "serieA",
      homeTeam: "Roma",
      awayTeam: "Lazio",
    },
    model: "novaExperimental",
    forecast: {
      outcome: "draw",
      confidence: 55,
      homeScore: 1,
      awayScore: 1,
      bothTeamsToScore: true,
      overUnder: "under_2.5",
      css: 0.41,
      factors: ["Derby volatility", "Both teams defensive focus"],
    },
    actual: undefined,
    calibrationError: 2.7,
  }),
  createPrediction({
    id: "pred-014",
    createdAt: "2024-11-22T08:00:00Z",
    status: "upcoming",
    match: {
      id: "match-ata-fio-20241125",
      date: "2024-11-25T18:30:00Z",
      status: "scheduled",
      league: "serieA",
      homeTeam: "Atalanta",
      awayTeam: "Fiorentina",
    },
    model: "atlasPrime",
    forecast: {
      outcome: "home",
      confidence: 73,
      homeScore: 2,
      awayScore: 1,
      bothTeamsToScore: true,
      overUnder: "over_2.5",
      css: 0.67,
      factors: ["Atalanta high press", "Fiorentina travel"],
    },
    actual: undefined,
    calibrationError: 1.9,
  }),
  createPrediction({
    id: "pred-015",
    createdAt: "2024-11-08T07:30:00Z",
    status: "won",
    match: {
      id: "match-bay-dor-20241109",
      date: "2024-11-09T17:30:00Z",
      status: "completed",
      league: "bundesliga",
      homeTeam: "Bayern Munich",
      awayTeam: "Borussia Dortmund",
    },
    model: "atlasPrime",
    forecast: {
      outcome: "home",
      confidence: 85,
      homeScore: 3,
      awayScore: 1,
      bothTeamsToScore: true,
      overUnder: "over_3.5",
      css: 0.83,
      factors: ["Bayern attacking depth", "Dortmund defensive injuries"],
    },
    actual: {
      outcome: "home",
      wasCorrect: true,
      homeScore: 4,
      awayScore: 2,
      evaluatedAt: "2024-11-09T19:45:00Z",
    },
    calibrationError: 1.5,
  }),
  createPrediction({
    id: "pred-016",
    createdAt: "2024-11-12T07:50:00Z",
    status: "lost",
    match: {
      id: "match-rbl-lev-20241113",
      date: "2024-11-13T18:30:00Z",
      status: "completed",
      league: "bundesliga",
      homeTeam: "RB Leipzig",
      awayTeam: "Bayer Leverkusen",
    },
    model: "heliosShadow",
    forecast: {
      outcome: "home",
      confidence: 60,
      homeScore: 2,
      awayScore: 1,
      bothTeamsToScore: true,
      overUnder: "over_2.5",
      css: 0.53,
      factors: ["Leipzig pressing edge", "Leverkusen rotation"],
    },
    actual: {
      outcome: "away",
      wasCorrect: false,
      homeScore: 1,
      awayScore: 3,
      evaluatedAt: "2024-11-13T20:45:00Z",
    },
    calibrationError: 3.4,
  }),
  createPrediction({
    id: "pred-017",
    createdAt: "2024-11-15T09:10:00Z",
    status: "in_progress",
    match: {
      id: "match-bmg-wol-20241116",
      date: "2024-11-16T15:30:00Z",
      status: "live",
      league: "bundesliga",
      homeTeam: "Borussia Mönchengladbach",
      awayTeam: "Wolfsburg",
    },
    model: "novaExperimental",
    forecast: {
      outcome: "draw",
      confidence: 57,
      homeScore: 2,
      awayScore: 2,
      bothTeamsToScore: true,
      overUnder: "over_3.5",
      css: 0.55,
      factors: ["High tempo matchup", "Both teams open defenses"],
    },
    actual: undefined,
    calibrationError: 2.4,
  }),
  createPrediction({
    id: "pred-018",
    createdAt: "2024-11-18T07:45:00Z",
    status: "upcoming",
    match: {
      id: "match-fra-stu-20241122",
      date: "2024-11-22T19:30:00Z",
      status: "scheduled",
      league: "bundesliga",
      homeTeam: "Eintracht Frankfurt",
      awayTeam: "VfB Stuttgart",
    },
    model: "orionEdge",
    forecast: {
      outcome: "home",
      confidence: 68,
      homeScore: 2,
      awayScore: 1,
      bothTeamsToScore: true,
      overUnder: "over_2.5",
      css: 0.62,
      factors: ["Frankfurt home momentum", "Stuttgart travel"],
    },
    actual: undefined,
    calibrationError: 1.7,
  }),
  createPrediction({
    id: "pred-019",
    createdAt: "2024-11-07T08:15:00Z",
    status: "won",
    match: {
      id: "match-psg-olm-20241108",
      date: "2024-11-08T21:00:00Z",
      status: "completed",
      league: "ligue1",
      homeTeam: "Paris Saint-Germain",
      awayTeam: "Marseille",
    },
    model: "atlasPrime",
    forecast: {
      outcome: "home",
      confidence: 90,
      homeScore: 3,
      awayScore: 0,
      bothTeamsToScore: false,
      overUnder: "over_2.5",
      css: 0.88,
      factors: ["PSG attacking trio", "Marseille defensive injuries"],
    },
    actual: {
      outcome: "home",
      wasCorrect: true,
      homeScore: 3,
      awayScore: 0,
      evaluatedAt: "2024-11-08T23:15:00Z",
    },
    calibrationError: 1.1,
  }),
  createPrediction({
    id: "pred-020",
    createdAt: "2024-11-10T07:45:00Z",
    status: "lost",
    match: {
      id: "match-lyo-mon-20241111",
      date: "2024-11-11T19:00:00Z",
      status: "completed",
      league: "ligue1",
      homeTeam: "Lyon",
      awayTeam: "Monaco",
    },
    model: "heliosShadow",
    forecast: {
      outcome: "home",
      confidence: 59,
      homeScore: 2,
      awayScore: 1,
      bothTeamsToScore: true,
      overUnder: "over_2.5",
      css: 0.54,
      factors: ["Lyon home crowd", "Monaco rotation"],
    },
    actual: {
      outcome: "away",
      wasCorrect: false,
      homeScore: 1,
      awayScore: 3,
      evaluatedAt: "2024-11-11T21:20:00Z",
    },
    calibrationError: 3.2,
  }),
  createPrediction({
    id: "pred-021",
    createdAt: "2024-11-14T08:05:00Z",
    status: "in_progress",
    match: {
      id: "match-lil-ren-20241115",
      date: "2024-11-15T20:00:00Z",
      status: "live",
      league: "ligue1",
      homeTeam: "Lille",
      awayTeam: "Rennes",
    },
    model: "novaExperimental",
    forecast: {
      outcome: "home",
      confidence: 65,
      homeScore: 2,
      awayScore: 1,
      bothTeamsToScore: true,
      overUnder: "over_2.5",
      css: 0.58,
      factors: ["Lille tactical tweaks", "Rennes away dip"],
    },
    actual: undefined,
    calibrationError: 2.2,
  }),
  createPrediction({
    id: "pred-022",
    createdAt: "2024-11-18T09:00:00Z",
    status: "upcoming",
    match: {
      id: "match-nic-nan-20241121",
      date: "2024-11-21T19:00:00Z",
      status: "scheduled",
      league: "ligue1",
      homeTeam: "Nice",
      awayTeam: "Nantes",
    },
    model: "orionEdge",
    forecast: {
      outcome: "home",
      confidence: 70,
      homeScore: 2,
      awayScore: 0,
      bothTeamsToScore: false,
      overUnder: "under_2.5",
      css: 0.63,
      factors: ["Nice defensive record", "Nantes scoring struggles"],
    },
    actual: undefined,
    calibrationError: 1.4,
  }),
];
